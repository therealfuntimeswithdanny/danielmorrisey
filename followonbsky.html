<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Follow on Bluesky — madebydanny.uk</title>

  <meta name="description" content="Quick profile card to open an AT Protocol (Bluesky) profile in multiple clients." />
  <meta name="robots" content="index, follow" />

  <style>
    :root {
      --bg: #0d0d0d;
      --card-bg: #1a1a1a;
      --text: #f5f5f5;
      --accent: #0070f3;
    }

    body {
      font-family: system-ui, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      transition: background 0.3s, color 0.3s;
    }

    .card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 24px 32px;
      box-shadow: 0 8px 28px rgba(0, 0, 0, 0.6);
      max-width: 340px;
      text-align: center;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeIn 0.6s ease forwards;
    }

    @keyframes fadeIn {
      to { opacity: 1; transform: none; }
    }

    .avatar {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 12px;
      border: 2px solid var(--accent);
    }

    h2, p { margin: 6px 0; }

    .tagline { font-size: 0.9rem; margin-top: 8px; opacity: 0.9; }

    .links { display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 20px; }

    .link {
      display: flex; align-items: center; justify-content: flex-start; width: 100%; background: rgba(255,255,255,0.02);
      color: inherit; text-decoration: none; padding: 10px 14px; border-radius: 12px; transition: all 0.25s ease;
    }

    .link img { width: 28px; height: 28px; margin-right: 10px; border-radius: 6px; }
    .link span { font-weight: 500; }

    /* Brand Hover Colors */
    .link.bsky:hover { background: #ffffff; color: #1083fd; transform: translateY(-3px); box-shadow: 0 0 12px rgba(2,133,255,0.4); }
    .link.deer:hover { background: #ffffff; color: #749f7a; transform: translateY(-3px); box-shadow: 0 0 12px rgba(255,111,97,0.4); }
    .link.catsky:hover { background: #ffffff; color: #cca6f7; transform: translateY(-3px); box-shadow: 0 0 12px rgba(255,183,0,0.4); }
    .link.blacksky:hover { background: #ffffff; color: #000000; transform: translateY(-3px); box-shadow: 0 0 12px rgba(255,255,255,0.2); }

    #info { margin-top: 16px; font-size: 13px; color: #bdbdbd; }
    #info a { color: var(--accent); text-decoration: none; }
    #info a:hover { text-decoration: underline; }
  </style>
</head>
<body>
   <div class="card">
    <img id="avatar" class="avatar" src="" alt="Profile photo" />
    <h2 id="displayName">Loading...</h2>
    <p id="tagline" class="tagline"></p>

    <div class="links" id="links"></div>

    <p id="info">
      by <a href="/followonbsky.html?did=did:plc:l37td5yhxl2irrzrgvei4qay">@madebydanny.uk</a>,
      add a client <a href="https://tally.so/r/nrzQDl" target="_blank">here</a>
    </p>
  </div>

  <script>
    const clients = [
      {
        name: "Bluesky",
        url: "https://bsky.app/profile/",
        icon: "https://imrs.madebydanny.uk/?url=https://public-cdn.madebydanny.uk/followonbluesky/bsky.png",
        class: "bsky"
      },
      {
        name: "Deer Social",
        url: "https://deer.social/profile/",
        icon: "https://imrs.madebydanny.uk/?url=https://public-cdn.madebydanny.uk/followonbluesky/deer-social.png",
        class: "deer"
      },
      {
        name: "Catsky",
        url: "https://catsky.social/profile/",
        icon: "https://imrs.madebydanny.uk/?url=https://public-cdn.madebydanny.uk/followonbluesky/catsky.png",
        class: "catsky"
      },
      {
        name: "Blacksky",
        url: "https://blacksky.community/profile/",
        icon: "https://imrs.madebydanny.uk/?url=https://public-cdn.madebydanny.uk/followonbluesky/black-sky.png",
        class: "blacksky"
      }
    ];

    async function loadProfile() {
      const params = new URLSearchParams(window.location.search);
      const did = params.get("did");
      if (!did) {
        document.getElementById("displayName").textContent = "Missing ?did=";
        return;
      }

      try {
        const res = await fetch(`https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=${did}`);
        const data = await res.json();
        const handle = encodeURIComponent(data.handle || did);
        const avatarUrl = data.avatar
          ? `https://imrs.madebydanny.uk?url=${encodeURIComponent(data.avatar)}`
          : "https://public-cdn.madebydanny.uk/default-avatar.png";

        document.getElementById("avatar").src = avatarUrl;
        document.getElementById("displayName").textContent = data.displayName || "Unknown User";
        document.getElementById("tagline").textContent = "@" + (data.handle || did) + " is on the AT Protocol — pick your client to follow them!";

        const linksContainer = document.getElementById("links");
        linksContainer.innerHTML = clients.map(client => `
          <a class="link ${client.class}" href="${client.url}${handle}" target="_blank">
            <img src="${client.icon}" alt="${client.name}" />
            <span>${client.name}</span>
          </a>
        `).join("");

      } catch (err) {
        document.querySelector(".card").innerHTML = `
          <h2>Error loading profile</h2>
          <p>Check your DID and try again.</p>`;
      }
    }

    loadProfile();
  </script>
</body>
</html>
